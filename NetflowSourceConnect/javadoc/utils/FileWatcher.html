<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_251) on Sat Nov 06 12:40:31 EET 2021 -->
<title>FileWatcher</title>
<meta name="date" content="2021-11-06">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="FileWatcher";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FileWatcher.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../utils/Helpers.html" title="class in utils"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?utils/FileWatcher.html" target="_top">Frames</a></li>
<li><a href="FileWatcher.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">utils</div>
<h2 title="Class FileWatcher" class="title">Class FileWatcher</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>utils.FileWatcher</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.lang.Runnable</dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">FileWatcher</span>
extends java.lang.Object
implements java.lang.Runnable</pre>
<div class="block">Filewatcher service. Watches a specific folder about new files.
 Uses a file (netflow-watcher-[collectorId].out) to store last read file.
 In Windows under location %APPDATA%\Local\Temp\Palantir.
 In Linux this file is saved under /var/tmp/Palantir.
 Filters all files in the directory and keeps only these that have name
 bigger compared with the stored one. This is based on the name of the
 nfcapd files, which have same prefix and date in their names in the format
 YYYYMMDD, so the new ones can be filtered. This will run in a separate
 thread, scans the directory evey X (configured) seconds. When new files found
 the file in application's path will be updated and an event must be sent to
 Kafka source connector, with all new detected files.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.1-SNAPSHOT</dd>
<dt><span class="simpleTagLabel">Version:</span></dt>
<dd>0.1-SNAPSHOT</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Space Hellas S.A.</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../utils/FileWatcher.html#collectorId">collectorId</a></span></code>
<div class="block">Id of the connector.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../utils/FileWatcher.html#dataFilePrefix">dataFilePrefix</a></span></code>
<div class="block">Prefix of the files, where the last seen file for each connector will
 be stored.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../utils/FileWatcher.html#dataPath">dataPath</a></span></code>
<div class="block">Path where application files and logs will be saved.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../utils/FileWatcher.html#lastSeenFilename">lastSeenFilename</a></span></code>
<div class="block">Filename, where the last processed netflow file will be saved.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.List&lt;<a href="../interfaces/FilesListener.html" title="interface in interfaces">FilesListener</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../utils/FileWatcher.html#listeners">listeners</a></span></code>
<div class="block">A list, with all listeners, that will receive transmitted events.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private org.apache.log4j.Logger</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../utils/FileWatcher.html#logger">logger</a></span></code>
<div class="block">Logger Instance.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../utils/FileWatcher.html#pathObserve">pathObserve</a></span></code>
<div class="block">The path, which this file watcher will observer for new files.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../utils/FileWatcher.html#FileWatcher-int-java.lang.String-java.lang.String-">FileWatcher</a></span>(int&nbsp;collectorId,
           java.lang.String&nbsp;prefix,
           java.lang.String&nbsp;pathToObserve)</code>
<div class="block">Constructor</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../utils/FileWatcher.html#addListener-interfaces.FilesListener-">addListener</a></span>(<a href="../interfaces/FilesListener.html" title="interface in interfaces">FilesListener</a>&nbsp;toAdd)</code>
<div class="block">Register a new listener.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>java.util.ArrayList&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../utils/FileWatcher.html#filterDirectory--">filterDirectory</a></span>()</code>
<div class="block">Scans a directory, for new created files.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../utils/FileWatcher.html#getLastSeen--">getLastSeen</a></span>()</code>
<div class="block">Reads file, where the name of last processed nfcapd is saved.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../utils/FileWatcher.html#removeListener-interfaces.FilesListener-">removeListener</a></span>(<a href="../interfaces/FilesListener.html" title="interface in interfaces">FilesListener</a>&nbsp;toRemove)</code>
<div class="block">Remove a registered listener.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../utils/FileWatcher.html#run--">run</a></span>()</code>
<div class="block">Main method of service.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../utils/FileWatcher.html#updateLastSeen-java.lang.String-">updateLastSeen</a></span>(java.lang.String&nbsp;lastFilename)</code>
<div class="block">Updates file, where the name of last processed nfcapd is saved.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="logger">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logger</h4>
<pre>private&nbsp;org.apache.log4j.Logger logger</pre>
<div class="block">Logger Instance.</div>
</li>
</ul>
<a name="listeners">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>listeners</h4>
<pre>private&nbsp;java.util.List&lt;<a href="../interfaces/FilesListener.html" title="interface in interfaces">FilesListener</a>&gt; listeners</pre>
<div class="block">A list, with all listeners, that will receive transmitted events.</div>
</li>
</ul>
<a name="collectorId">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>collectorId</h4>
<pre>private&nbsp;int collectorId</pre>
<div class="block">Id of the connector.</div>
</li>
</ul>
<a name="dataPath">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dataPath</h4>
<pre>private&nbsp;java.lang.String dataPath</pre>
<div class="block">Path where application files and logs will be saved.
 For Windows OSes, this path is %APPDATA%\Local\Temp\Palantir\.
 For Linus OSes, this path is /var/tmp/Palantir/</div>
</li>
</ul>
<a name="dataFilePrefix">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dataFilePrefix</h4>
<pre>private&nbsp;java.lang.String dataFilePrefix</pre>
<div class="block">Prefix of the files, where the last seen file for each connector will
 be stored. Each connector will has its own file, identified by tis id.</div>
</li>
</ul>
<a name="pathObserve">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pathObserve</h4>
<pre>private&nbsp;java.lang.String pathObserve</pre>
<div class="block">The path, which this file watcher will observer for new files.</div>
</li>
</ul>
<a name="lastSeenFilename">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>lastSeenFilename</h4>
<pre>private&nbsp;java.lang.String lastSeenFilename</pre>
<div class="block">Filename, where the last processed netflow file will be saved.
 Its absolute path is: [dataPath]/[dataFilePrefix]-[collectorId].out</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="FileWatcher-int-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FileWatcher</h4>
<pre>public&nbsp;FileWatcher(int&nbsp;collectorId,
                   java.lang.String&nbsp;prefix,
                   java.lang.String&nbsp;pathToObserve)</pre>
<div class="block">Constructor</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>collectorId</code> - Id of this collector. Id must be unique.</dd>
<dd><code>prefix</code> - Prefix of file, where last seen nfcapd is stored.</dd>
<dd><code>pathToObserve</code> - Path to scan for new nfcapd files.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getLastSeen--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastSeen</h4>
<pre>@Nullable
private&nbsp;java.lang.String&nbsp;getLastSeen()</pre>
<div class="block">Reads file, where the name of last processed nfcapd is saved.
 Returns filename of last processed nfcapd file.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>String Last processed nfcapd file.</dd>
</dl>
</li>
</ul>
<a name="updateLastSeen-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateLastSeen</h4>
<pre>private&nbsp;void&nbsp;updateLastSeen(java.lang.String&nbsp;lastFilename)</pre>
<div class="block">Updates file, where the name of last processed nfcapd is saved.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>lastFilename</code> - Last new nfcapd file scanned.</dd>
</dl>
</li>
</ul>
<a name="filterDirectory--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>filterDirectory</h4>
<pre>public&nbsp;java.util.ArrayList&lt;java.lang.String&gt;&nbsp;filterDirectory()</pre>
<div class="block">Scans a directory, for new created files. Retrieves all files in
 directory and compares their name with the saved one. If their
 names are bigger compared to the saved one, it considers them
 as new. The names of all new files will be returned in an Arraylist.
 It also updates the file, where the name of last processed is stored.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>ArrayList(String) The names of new detected files.</dd>
</dl>
</li>
</ul>
<a name="run--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre>public&nbsp;void&nbsp;run()</pre>
<div class="block">Main method of service. It calls filterDirectory method every X seconds.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.lang.Runnable</code></dd>
</dl>
</li>
</ul>
<a name="addListener-interfaces.FilesListener-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addListener</h4>
<pre>public&nbsp;void&nbsp;addListener(<a href="../interfaces/FilesListener.html" title="interface in interfaces">FilesListener</a>&nbsp;toAdd)</pre>
<div class="block">Register a new listener. Every class that implements FileListener
 calling this function can be registered and receive new events.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>toAdd</code> - Class that implements FilesListener.</dd>
</dl>
</li>
</ul>
<a name="removeListener-interfaces.FilesListener-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>removeListener</h4>
<pre>public&nbsp;void&nbsp;removeListener(<a href="../interfaces/FilesListener.html" title="interface in interfaces">FilesListener</a>&nbsp;toRemove)</pre>
<div class="block">Remove a registered listener. This observer will stop
 receiving events.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>toRemove</code> - Class that implements FilesListener.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FileWatcher.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../utils/Helpers.html" title="class in utils"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?utils/FileWatcher.html" target="_top">Frames</a></li>
<li><a href="FileWatcher.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
